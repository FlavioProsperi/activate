<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" dir="ltr" lang="pt-BR"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" dir="ltr" lang="pt-BR"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" dir="ltr" lang="pt-BR"> <![endif]-->
<!--[if gt IE 8]><!--> <html dir="ltr" lang="pt-BR"> <!--<![endif]-->

<!-- Mirrored from activate-framework.org/1-2-docs/entity-v1-2/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 27 Feb 2016 17:51:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

	<!--=== META TAGS ===-->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta charset="UTF-8" />
	<meta name="description" content="Keywords">
	<meta name="author" content="Name">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!--=== LINK TAGS ===-->
	<link rel="shortcut icon" href="../../favicon.ico" />
	<link rel="alternate" type="application/rss+xml" title="Activate Persistence Framework RSS2 Feed" href="../../feed/index.html" />
	<link rel="pingback" href="../../xmlrpc.php" />
	<link rel="apple-touch-icon" href="images/apple-touch-icon.html">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.html">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.html">

	<!--=== TITLE ===-->
	<title> &raquo; Entity (v1.2) - Activate Persistence Framework</title>
	
	<!--== GOOGLE FONTS ==-->
	<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

	<!--=== WP_HEAD() ===-->
	<link rel="alternate" type="application/rss+xml" title="Activate Persistence Framework &raquo; Entity (v1.2) Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='base-style-css'  href='../../wp-content/themes/atom/css/base68b3.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='skeleton-style-css'  href='../../wp-content/themes/atom/css/skeleton68b3.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='layout-style-css'  href='../../wp-content/themes/atom/css/layout68b3.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='main-style-css'  href='../../wp-content/themes/atom/style5152.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='shortcodes-style-css'  href='../../wp-content/themes/atom/wpts/shortcodes/assets/css/shortcodes68b3.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='pretty-style-css'  href='../../wp-content/themes/atom/wpts/shortcodes/assets/prettyphoto/css/prettyPhoto68b3.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='shCore-style-css'  href='../../wp-content/themes/atom/wpts/shortcodes/assets/syntaxhigh/styles/shCoredc98.css?ver=all' type='text/css' media='all' />
<link rel='stylesheet' id='shThemeDefault-css'  href='../../wp-content/themes/atom/wpts/shortcodes/assets/syntaxhigh/styles/shThemeDefaultdc98.css?ver=all' type='text/css' media='all' />
<link rel='stylesheet' id='flex-slider-css-css'  href='../../wp-content/themes/atom/wpts/shortcodes/assets/flexslider/flexslider.css' type='text/css' media='all' />
<link rel='stylesheet' id='uploadify-css-css'  href='../../wp-content/themes/atom/uploadify/uploadify.css' type='text/css' media='all' />
<script type="text/javascript">var THEME_DIR = "../../wp-content/themes/atom/index.html";</script><script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type='text/javascript' src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/js/jquery.isotope.min.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/js/init.js'></script>
<script type='text/javascript' src='https://apis.google.com/js/plusone.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/jquery.tweet68b3.js?ver=1'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/jquery.tipTip.minified4e44.js?ver=1.3'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/prettyphoto/js/jquery.prettyPhoto.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/prettyphoto/init.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/syntaxhigh/scripts/shCore.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/syntaxhigh/scripts/shAutoloader.js'></script>
<script type='text/javascript' src='http://maps.googleapis.com/maps/api/js?key=&amp;sensor=false'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/jquery.gmap-1.1.0-min.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/flexslider/jquery.flexslider-min.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/uploadify/swfobject.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/uploadify/jquery.uploadify.v2.1.4.min.js'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/js/ordernow.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://activate-framework.org/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Architecture (v1.2)' href='../architecture-v1-2/index.html' />
<link rel='next' title='Mass statement (v1.2)' href='../mass-statement-v1-2/index.html' />
<link rel='canonical' href='index.html' />
	<link type="text/css" rel="stylesheet" href="../../wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/styles/shCore.css"></link>
	<link type="text/css" rel="stylesheet" href="../../wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/styles/shThemeDefault.css"></link>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34374169-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body class="page page-id-1146 page-child parent-pageid-1139 page-template-default">

<div class="container" id="header-wrapper-top">
	<div id="logo-top">
		<a href="../../index.html"><img class="scale-with-grid" src="../../wp-content/uploads/2012/05/activate_logo_site3.png" alt=" " /></a>
	</div><!-- #logo -->
	
	<div id="navigation-toggle"><a href="#">SHOW NAVIGATION</a></div>
				
	<div id="top-menu">
		<ul id="menu-main-menu" class="nav"><li id="menu-item-186" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home"><a href="../../index.html">HOME</a></li>
<li id="menu-item-1407" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/fwbrasil/activate/blob/master/activate-docs/get-started.md">GET STARTED</a></li>
<li id="menu-item-1394" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/fwbrasil/activate/blob/v1.5/activate-docs/_index.md">DOCUMENTATION</a></li>
<li id="menu-item-578" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/fwbrasil/activate">SOURCE CODE</a></li>
<li id="menu-item-443" class="menu-item menu-item-type-custom menu-item-object-custom"><a target="_blank" href="https://github.com/fwbrasil/activate/issues">ISSUES</a></li>
<li id="menu-item-291" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="../../blog/index.html">BLOG</a></li>
<li id="menu-item-939" class="menu-item menu-item-type-custom menu-item-object-custom"><a target="_blank" href="http://groups.google.com/group/activate-persistence">GOOGLE GROUP</a></li>
</ul>	</div> <!-- #side-menu -->
</div>

	<div class="container" id="wrapper">
		
		<div class="columns twelve alpha omega" id="main-content">
		
						
			<div class="mega-title mega-single">
				<h1>Entity (v1.2)</h1>
			</div>
			
			<div class="post">
				<div class="post-content page-content">
					<p>To define a persistent entity you just have to extend the Entity trait. First, import from your persistence context:</p>
<pre class="brush: scala">

import myContext._
</pre>
<p>With this import, all methods and types to use Activate will be in the class scope.</p>
<p>Entities can be defined in just one line:</p>
<pre class="brush: scala">

class Person(var name: String) extends Entity
</pre>
<p>You can declare the attributes as val or var, where they are immutable or not.</p>
<p>Activate uses <strong>Transparent Persistence</strong> for all classes that extends the Entity trait directly or indirectly. This means that all instance creations and modifications will be automatically persistent. It&#8217;s unnecessary to use methods like &#8220;persist&#8221;, &#8220;save&#8221;, &#8220;merge&#8221;, etc.</p>
<p><a name="entity_trait"/></p>
<div class="section-wrapper">
<div class="section-title section-title-default">
<h3><a href="#entity_trait">The Entity Trait</a></h3>
</div>
<div class="clearfix"></div>
</p></div>
<p>The entity trait adds the following methods and values:</p>
<p style="padding-left: 30px;"><strong>val id: String</strong><br />
An automatic generated timestamp based UUID added with the entity type information.<br />
It&#8217;s possible to recover the class using EntityHelper.getEntityClassFromId.<br />
It has 45 characters.</p>
<p style="padding-left: 30px;"><strong>def delete: Unit</strong><br />
Delete the entity instance</p>
<p style="padding-left: 30px;"><strong>def isDeleted: Boolean</strong><br />
Indicates if the instance is deleted.</p>
<p style="padding-left: 30px;"><strong>def isDirty: Boolean</strong><br />
Indicates if the entity is modified by the current transaction.</p>
<p style="padding-left: 30px;"><strong>def creationTimestamp: Long<br />
def creationDate: java.util.Date<br />
def creationDateTime: org.joda.time.DateTime</strong><br />
Return the instance creation date/timestamp. It&#8217;s not possible to perform queries using this methods. They extract the timestamp information from the entity UUID.</p>
<p>The entity trait also overrides the <strong>toString</strong> method, generating a string representation based on the entity properties.</p>
<p><a name="attributes_types"/></p>
<div class="section-wrapper">
<div class="section-title section-title-default">
<h3><a href="#attributes_types">Attributes types</a></h3>
</div>
<div class="clearfix"></div>
</p></div>
<p>Activate has support for the types listed below. If an unsupported type is used, Activate will produce an error on context startup.</p>
<p>Simple types:</p>
<p style="padding-left: 30px;"><strong>scala.Int<br />
scala.Long<br />
scala.Boolean<br />
scala.Char<br />
scala.Float<br />
scala.Double<br />
scala.math.BigDecimal<br />
java.lang.String<br />
</strong>
</p>
<p>Other types:</p>
<p style="padding-left: 30px;">
<strong>scala.collection.immutable.List</strong><br />
MongoStorage, PrevaylerStorage and TransientMemoryStorage persist lists as &#8220;native&#8221; values.<br />
JdbcRelationalStorage persists lists in a separate list table. See <a href="../migration-v1-2/index.html" title="Migration">migration</a> for more information.
</p>
<p style="padding-left: 30px;">
<strong>scala.Enumeration</strong><br />
To use enumerations you must sublcass Val. Instead of &#8220;type MyEnum = Value&#8221;, use case &#8220;class MyEnum(name: String) extends Val(name)&#8221;.
</p>
<p style="padding-left: 30px;">
<strong>java.util.Date</strong><br />
<strong>java.util.Calendar</strong><br />
<strong>scala.Array[Byte]</strong><br />
If you have to modify a date/calendar/byte array attribute, don&#8217;t change the actual instance. Produce a new one and set the attribute again. Otherwise, Activate will not track modifications.
</p>
<p style="padding-left: 30px;">
<strong>org.joda.time.base.AbstractInstant</strong><br />
Support for joda time AbstractInstant subclasses: Instant, DateMidnight and DateTime.
</p>
<p style="padding-left: 30px;">
<strong>net.fwbrasil.activate.entity.Entity</strong><br />
Entity attributes are persisted as references (id) in the storage.
</p>
<p style="padding-left: 30px;">
<strong>scala.Serializable</strong><br />
Activate uses Serializable as the last option, other types have priority. Ensure that the serializable is immutable, otherwise Activate will not control the serializable internal modifications.
</p>
<p style="padding-left: 30px;">
<strong>scala.Option</strong><br />
Support for &#8220;options&#8221; for any of the types listed above.
</p>
<p><a name="custom_serializers"/></p>
<div class="section-wrapper">
<div class="section-title section-title-default">
<h3><a href="#custom_serializers">Custom Serializers</a></h3>
</div>
<div class="clearfix"></div>
</p></div>
<p>Activate uses serialization as the last option to persist an entity attribute, if it is supported. It is possible to determine the serializer to be used by overriding the context default serializer:</p>
<pre class="brush: scala">

import net.fwbrasil.activate.serialization.xmlSerializer
object myContext extends ActivateContext {
    val storage = ...
    override protected val defaultSerializer = xmlSerializer
}
</pre>
<p>Provided serializer implementations:</p>
<p>net.fwbrasil.activate.serialization.xmlSerializer<br />
net.fwbrasil.activate.serialization.jsonSerializer<br />
net.fwbrasil.activate.serialization.javaSerializer</p>
<p>Additionally, is possible to define custom serializers by entity attribute:</p>
<pre class="brush: scala">

import net.fwbrasil.activate.serialization.xmlSerializer
import net.fwbrasil.activate.serialization.jsonSerializer
object myContext extends ActivateContext {
    val storage = ...
    override protected def customSerializers = List(
        serialize[MyEntity](_.someAttribute) using jsonSerializer,
        serialize[OtherEntity](_.otherAttribute) using xmlSerializer)
}
</pre>
<p><a name="transient_attributes"/></p>
<div class="section-wrapper">
<div class="section-title section-title-default">
<h3><a href="#transient_attributes">transient attributes</a></h3>
</div>
<div class="clearfix"></div>
</p></div>
<p>It is possible to use transient entity attributes using the Scala @transient annotation. The value can be an unsupported type, since it will not be persisted to the storage.</p>
<pre class="brush: scala">

class MyEntity extends Entity {
    @transient val valThatWillNotBePersisted = "a"
    @transient var varThatWillNotBePersisted = "b"
}
</pre>
<p>The value can be lazy. It will be initialized every time that the entity is loaded from the storage and the attribute used: </p>
<pre class="brush: scala">

class MyEntity extends Entity {
    @transient lazy val attributeThatWillBeLazyInitializedAferEntityLoad = "a"
}
</pre>
<p><a name="entity_alias"/></p>
<div class="section-wrapper">
<div class="section-title section-title-default">
<h3><a href="#entity_alias">Entity alias</a></h3>
</div>
<div class="clearfix"></div>
</p></div>
<p>It is possible to define custom names for entities and its properties. The custom names define how Activate persist the information. Example:</p>
<pre class="brush: scala">

@Alias("PersonTable")
class Person(@Alias("personName") var name: String) extends Entity
</pre>
<p><a name="entity_serialization"/></p>
<div class="section-wrapper">
<div class="section-title section-title-default">
<h3><a href="#entity_serialization">Entity Serialization</a></h3>
</div>
<div class="clearfix"></div>
</p></div>
<p>An entity can be serialized/deserialized and stays consistent. Activate serialize entities inside an envelope containing the entity id. When the entity is deserialized, it is recovered from the LiveCache or from the storage. If the entity is serialized during a transaction that holds a modification on it, if the transaction don&#8217;t commit, the deserialized entity will not have the modification.</p>

<div class="one_half" ><a href="../persistence-context-v1-2/index.html" title="Persistence context">< Persistence Context (previous)</a></div>
<div class="one_half last " ><p style="text-align: right;"><a href="../transaction-v1-2/index.html" title="Transaction">(next) Transaction ></a></p></div><div class="clearboth"></div>
				</div>
			</div> <!-- .post -->
						
						
			<!-- START of PAGINATION -->
    		<div class="pagination"><div class='newer-posts'>&nbsp;</div><div class='older-posts'>&nbsp;</div><div class='clearfix'></div></div>
    		<!-- END of PAGINATION -->

		</div> <!-- #main-content -->
		
		 
<div class="columns four alpha" id="side-nav">
	<div id="header-wrapper-side">
<div id="logo">
	<a href="../../index.html"><img class="scale-with-grid" src="../../wp-content/uploads/2012/05/activate_logo_site3.png" alt=" " /></a>
</div><!-- #logo -->

<div id="side-menu">
	<ul id="menu-main-menu-1" class="nav"><li id="menu-item-186" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home"><a href="../../index.html">HOME</a></li>
<li id="menu-item-1407" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/fwbrasil/activate/blob/master/activate-docs/get-started.md">GET STARTED</a></li>
<li id="menu-item-1394" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/fwbrasil/activate/blob/v1.5/activate-docs/_index.md">DOCUMENTATION</a></li>
<li id="menu-item-578" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/fwbrasil/activate">SOURCE CODE</a></li>
<li id="menu-item-443" class="menu-item menu-item-type-custom menu-item-object-custom"><a target="_blank" href="https://github.com/fwbrasil/activate/issues">ISSUES</a></li>
<li id="menu-item-291" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="../../blog/index.html">BLOG</a></li>
<li id="menu-item-939" class="menu-item menu-item-type-custom menu-item-object-custom"><a target="_blank" href="http://groups.google.com/group/activate-persistence">GOOGLE GROUP</a></li>
</ul></div> <!-- #side-menu -->

	</div> <!-- #header-wrapper -->
	
	<div id="widgets">
<div id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" action="http://activate-framework.org/" >
	<div><label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" value="" name="s" id="s" />
	<input type="submit" id="searchsubmit" value="Search" />
	</div>
	</form></div>		<div id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widgettitle"><span class="title">Recent Posts</span></h3>		<ul>
				<li><a href="../../activate-1-6/index.html" title="Activate 1.6">Activate 1.6</a></li>
				<li><a href="../../activate-1-5-is-out/index.html" title="Activate 1.5 is out!">Activate 1.5 is out!</a></li>
				<li><a href="../../activate-1-4-1/index.html" title="Activate 1.4.1">Activate 1.4.1</a></li>
				<li><a href="../../activate-1-3-reactive-persistence/index.html" title="Activate 1.3 &#8211; Reactive Persistence">Activate 1.3 &#8211; Reactive Persistence</a></li>
				<li><a href="../../activate-1-2/index.html" title="Activate 1.2 &#8211; Polyglot Persistence">Activate 1.2 &#8211; Polyglot Persistence</a></li>
				</ul>
		</div><div id="text-3" class="widget widget_text">			<div class="textwidget"></div>
		</div>	</div> <!-- #widgets -->
	
</div> <!-- #side-nav --> 
		
	</div><!-- #wrapper -->

	<!--div class="container" id="footer">
		<div id="footer-line-1" class="footer-line">
			<span class="line-content">
				<font color=white>Activate is released under LGPL license.</font>			</span>
		</div>
	</div-->
	
	<script type="text/javascript">resizeSidenav();</script>

<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/jquery.tools.tabs.min54f4.js?ver=1.2.5'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/tabs-init68b3.js?ver=1'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/pin-init68b3.js?ver=1'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/tweet-api68b3.js?ver=1'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/js/tooltip-init68b3.js?ver=1'></script>
<script type='text/javascript' src='../../wp-content/themes/atom/wpts/shortcodes/assets/syntaxhigh/scripts/shInit68b3.js?ver=1'></script>

<!-- SyntaxHighlighter Stuff -->
<script type="text/javascript" src="../../wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/src/shCore.js"></script>
<script type="text/javascript">
	SyntaxHighlighter.all();
</script>

	</body>

<!-- Mirrored from activate-framework.org/1-2-docs/entity-v1-2/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 27 Feb 2016 17:51:30 GMT -->
</html>